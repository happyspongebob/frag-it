# 任务文档（需求与整体规划）

## 1. 产品定位
- **产品类型**：情绪缓冲型网站（MVP 单页）
- **不是**：效率工具 / TODO 管理器 / 心理治疗或心理诊断产品
- **一句话**：一个允许用户暂时不面对现实、喘一口气的地方（允许用户脆弱 30 秒）

## 2. 核心体验流程（端到端）
1. 用户输入一件「正在逃避 / 不想面对的事情」
2. 通过「粉碎」互动把“压迫感”视觉化并打碎（页面不跳转）
3. 粉碎完成后展示一段真实、不鸡汤、不说教的缓冲文案
4. 展示不强制的后续出口（仅呈现，不要求执行逻辑）

## 3. 页面结构（必须按顺序实现）
### 3.1 顶部理念区（Hero）
- **主文案**：你不需要立刻面对一切。
- **副标题**：这里不是让你变好，是让你先轻一点。
- **布局**：居中

### 3.2 输入区（核心入口）
- **输入控件**：简洁文本输入框
- **placeholder**：现在压在你身上的事情是……
- **主按钮**：把它放下来

### 3.3 粉碎交互区（核心体验）
- 点击主按钮后：
  - 输入区淡出
  - 粉碎区淡入
  - 将输入内容渲染成卡片/文本块
  - 触发碎裂/解体动画（文本碎裂或卡片裂开并消散）

### 3.4 情绪缓冲文案展示区（粉碎后出现）
- 粉碎动画结束后展示文案
- **风格约束**：不鸡汤 / 不命令 / 不鼓励自律 / 不否定逃避
- **文案池（随机一条）**：
  - 你不是不做，你只是把它从‘现在’移到了‘之后’。
  - 想逃避，说明这件事对你来说真的不轻松。
  - 也许你不是不想做这件事，你只是不想一次做完它。
  - 现在放下，并不等于永远不面对。

### 3.5 轻量出口区（非强制）
- 底部淡淡出现 2–3 个可选文本按钮（非主要 CTA）
- 示例：
  - 5 分钟后再回来看看
  - 把它变成一个更小的东西
  - 今天不碰，也是一种选择
- **不需要真正逻辑**：仅作为心理出口

## 4. 视觉与 UI 要求（非常重要）
### 4.1 整体风格
- **背景**：温暖、舒适、低饱和
- 推荐：奶油米色 / 浅杏色 / 温暖浅橙，可轻微渐变
- 避免：纯白 / 冷灰 / 强对比色

### 4.2 氛围关键词
- 温柔 / 安静 / 被接住 / 安全感 / 不着急

### 4.3 字体与布局
- 圆润友好的无衬线字体
- 大量留白
- 按钮与卡片圆角
- 动画偏慢、不要刺激

## 5. 交互细节与节奏
- 点击“把它放下来”后：输入框淡出、粉碎区域淡入
- 粉碎完成后：安慰文案缓慢淡入
- 全流程：30–60 秒内完成体验

## 6. 技术要求
- 纯前端：React + TypeScript
- 构建工具：Vite
- 样式：Tailwind CSS
- 动画：Framer Motion
- 状态管理：React Hooks（useState 为主）
- 无后端、无登录
- 本地可运行：`npm install && npm run dev`

## 7. 交付物与文件结构（建议）
- Vite 项目（React + TS）
- `任务文档.md`：记录需求与整体规划
- `进度文档.md`：追踪已完成内容
- `src/App.tsx`：主应用组件（状态机/页面组装）
- `src/components/ShatterEffect.tsx`：粉碎动画组件
- `src/components/ComfortMessage.tsx`：智能安慰 + 积极肯定组件

## 8. 里程碑规划（MVP）
- **M1**：页面结构与视觉基调落地（Hero / 输入 / 容器）
- **M2**：粉碎动画与流程控制（淡入淡出、不中断、不跳转）
- **M3**：缓冲文案随机展示 + 轻量出口呈现
- **M4**：可用性与可访问性（键盘触发、减少动画偏好）

## 9. 版本记录（V + 时间）
### V1｜2026-02-25
- **初始化**：完成单页 MVP（基础粉碎流程 + 随机缓冲文案 + 轻量出口）并创建两份文档

### V2｜2026-02-25 06:40
- **粉碎动画升级**：文字拆解为彩色碎片，伴随粒子爆炸四散飞溅
- **智能安慰**：根据输入内容类别（工作/社交/感情/学业/家庭/通用）匹配更贴合的安慰语句
- **积极肯定**：每次粉碎后额外显示一句轻量正向肯定语（不说教、不命令）
- **实现策略**：
  - 将输入文本按字符拆分为 `span`，取每个字符在舞台中的位置生成“碎片”并飞散
  - 粒子爆炸使用轻量 DOM 粒子（无需 canvas）
  - 文案匹配使用关键词粗分类（MVP），默认回退通用文案池

### V3｜2026-02-25 11:53
- **技术栈迁移**：从原生单文件实现迁移到 React + TypeScript + Vite + Tailwind + Framer Motion
- **三态流程**：输入（input）→ 粉碎中（crushing）→ 结果（result），单页切换不跳转
- **可重复使用**：结果页提供“粉碎新的烦恼”并清理状态/粒子，避免越用越卡
- **文案系统**：保留智能安慰（分类匹配）与积极肯定（额外一句）

### V4｜2026-02-25 12:23
- **粉碎中动效升级**：crushing 状态改为“碎纸机”效果（竖向纸条下落消散）
- **音效（可选）**：加入撕纸/碎纸音效播放（需提供 `public/sfx/tear.mp3`）与音效开关

### V5｜2026-02-25 12:50
- **视觉升级**：整体配色调整为更淡的浅杏/奶油米白系，减少橙感
- **节奏调整**：延长 crushing 停留时长（约 4200ms），并拉长条状碎纸掉落时间（约 2.4~3.2s）
- **粉碎表现**：碎纸机动效加入更明显的碎纸堆堆积（卡片底部靠近边缘），并在撕碎过程中制造粒子爆炸飞溅、不断消散的效果
- **粒子可见性**：粒子尺寸与亮度增强，并提高层级避免被纸条覆盖，确保肉眼可见

### V6｜2026-02-25 23:08
- **轻量后续出口**：在结果页加入不强制的后续选择（淡入显示、非主 CTA），并调整为位于“粉碎新的烦恼”按钮下方的三个次级按钮，仅呈现不记录、不提醒、不打卡

### V7｜2026-02-25 23:25
- **拖拽粉碎入口**：在输入态新增“拖拽烦恼卡片到粉碎区（Drop Zone）松手触发粉碎”，并与按钮触发共用同一套粉碎逻辑（音效/seed/state）

## 10. GitHub 上传 / 推送指令
> 以下命令在项目根目录执行（包含 `package.json` 的目录）。

### 10.1 首次上传（本地尚未初始化为 git 仓库）
1. 初始化仓库
   - `git init`
2. 添加并提交
   - `git add .`
   - `git commit -m "feat: init frag-it"`
3. 绑定远端（将 URL 替换为你的仓库地址）
   - `git branch -M main`
   - `git remote add origin https://github.com/<yourname>/<repo>.git`
4. 推送
   - `git push -u origin main`

### 10.2 已有仓库（本地已经是 git 仓库）
1. 查看当前远端
   - `git remote -v`
2. 如果还没有 origin：添加远端
   - `git remote add origin https://github.com/<yourname>/<repo>.git`
3. 如果 origin 已存在但需要改地址：更新远端
   - `git remote set-url origin https://github.com/<yourname>/<repo>.git`
4. 提交并推送
   - `git add .`
   - `git commit -m "chore: update"`
   - `git push -u origin main`
